## **7** Data Wrangling {-}

```{r, echo=FALSE}
met_df %>%
  separate(Culture, c("culture", "dose_mg_ml"), sep = " dose--") %>%
  mutate(dose_mg_ml = gsub("-mg/ml","", dose_mg_ml)) %>%
  mutate(dose_mg_ml = as.numeric(dose_mg_ml)) %>%
  pivot_longer(cols = 4:13, names_to = "metabolite_time", values_to = "abundance") %>%
  separate(metabolite_time, c("metabolite","time_hr"), sep="_runtime_") %>%
    mutate(
    time_hr = case_when(
      grepl("hr", time_hr, ignore.case = TRUE) ~ as.numeric(gsub("hr", "", time_hr)),
      grepl("day", time_hr, ignore.case = TRUE) ~ as.numeric(gsub("day", "", time_hr)) * 24
    )
  ) %>%
  select(-User)
```
